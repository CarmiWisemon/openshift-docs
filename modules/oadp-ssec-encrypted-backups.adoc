// Module included in the following assemblies:
//
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-aws.adoc
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-azure.adoc
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-gcp.adoc
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-mcg.adoc
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-ocs.adoc

:_mod-docs-content-type: PROCEDURE
[id="oadp-ssec-encrypted-backups_{context}"]
= OADP SSE-C encrypted backups

First and foremost it is important to note Amazon S3 now applies server-side encryption with Amazon S3 managed keys (SSE-S3) as the base level of encryption for every bucket in Amazon S3 [1]. It is also important to note that OpenShift and OADP encrypt data via SSL, HTTPS, and the velero-repo-credentials secret while data is transfered off cluster to storage. [2]
Comment
Suggest edit

Red Hat strongly recommends using an additional layer of encryption to help prevent backed up data from being unencrypted in the case of lost or stolen AWS credentials. The OpenShift velero-plugin-for-aws provides several additional encryption methods [3]. Red Hat recommends reviewing the configuration options and implementing additional encryption.

SSE-C encryption provides Red Hat customers server-side encryption with customer-provided keys (SSE-C), such that customers can store their own encryption keys. This will provide the required addtional security in the case where AWS credentials have been exposed. [4]

You create a default `Secret` if your backup and snapshot locations use the same credentials or if you do not require a snapshot location.

ifdef::installing-oadp-aws,installing-oadp-azure,installing-oadp-gcp,installing-oadp-mcg[]
The default name of the `Secret` is `{credentials}`.
endif::[]
ifdef::installing-oadp-ocs[]
The default name of the `Secret` is `{credentials}`, unless your backup storage provider has a default plugin, such as `aws`, `azure`, or `gcp`. In that case, the default name is specified in the provider-specific OADP installation procedure.
endif::[]

[NOTE]
====
The `DataProtectionApplication` custom resource (CR) requires a default `Secret`.  Otherwise, the installation will fail. If the name of the backup location `Secret` is not specified, the default name is used.

If you do not want to use the backup location credentials during the installation, you can create a `Secret` with the default name by using an empty `credentials-velero` file.
====

.Prerequisites

* Your object storage and cloud storage, if any, must use the same credentials.
* You must configure object storage for Velero.
* You must create a `credentials-velero` file for the object storage in the appropriate format.

.Procedure

* Create a `Secret` with the default name:
+
[source,terminal,subs="attributes+"]
----
$ oc create secret generic {credentials} -n openshift-adp --from-file cloud=credentials-velero
----

The `Secret` is referenced in the `spec.backupLocations.credential` block of the `DataProtectionApplication` CR when you install the Data Protection Application.
